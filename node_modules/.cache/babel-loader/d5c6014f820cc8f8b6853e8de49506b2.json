{"ast":null,"code":"import _slicedToArray from \"/home/rodrigo/Codigos/ReactJs-Firechat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/rodrigo/Codigos/ReactJs-Firechat/src/components/Chat.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport SignOut from './SignOut';\nimport { auth, db } from '../firebase';\nimport { collection, onSnapshot, query, orderBy, limit } from 'firebase/firestore';\nimport SendMessage from '../components/SendMessage';\n\nfunction Chat() {\n  var _this = this;\n\n  var scroll = useRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      messages = _useState2[0],\n      setMessages = _useState2[1];\n\n  useEffect(function () {\n    var msgRef = collection(db, \"messages\");\n    var q = query(msgRef, orderBy('createdAt', 'asc'), limit(50));\n    onSnapshot(q, function (snapshot) {\n      setMessages(snapshot.docs.map(function (doc) {\n        return doc.data();\n      }));\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(SignOut, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"msgs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }\n  }, messages.map(function (_ref) {\n    var id = _ref.id,\n        text = _ref.text,\n        photoURL = _ref.photoURL,\n        uid = _ref.uid;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      key: id,\n      className: \"msg \".concat(uid === auth.currentUser.uid ? 'sent' : 'received'),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: photoURL,\n      alt: \"\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 21\n      }\n    }, text)));\n  })), /*#__PURE__*/React.createElement(SendMessage, {\n    scroll: scroll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    ref: scroll,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }));\n}\n\nexport default Chat;","map":{"version":3,"names":["React","useState","useEffect","useRef","SignOut","auth","db","collection","onSnapshot","query","orderBy","limit","SendMessage","Chat","scroll","messages","setMessages","msgRef","q","snapshot","docs","map","doc","data","id","text","photoURL","uid","currentUser"],"sources":["/home/rodrigo/Codigos/ReactJs-Firechat/src/components/Chat.js"],"sourcesContent":["import React, {useState, useEffect, useRef} from 'react'\nimport SignOut from './SignOut'\nimport {auth, db} from '../firebase'\nimport { collection, onSnapshot, query, orderBy, limit, } from 'firebase/firestore'\nimport SendMessage from '../components/SendMessage'\n\nfunction Chat() {\n    const scroll = useRef();\n    const [messages, setMessages] = useState([])\n    useEffect(() => {\n        const msgRef = collection(db, \"messages\");\n\n        const q = query(msgRef, orderBy('createdAt', 'asc'), limit(50))\n\n        onSnapshot( q, snapshot => {\n            setMessages(snapshot.docs.map(doc => doc.data()))\n        })\n    }, [])\n    return (\n    <div>\n        <SignOut />\n        <div className=\"msgs\">\n        {messages.map(({ id, text, photoURL, uid}) => (\n            <div>\n                <div key={id} className={`msg ${uid === auth.currentUser.uid ? 'sent' : 'received'}`}>\n                    <img src={photoURL} alt=\"\" />\n                    <p>{text}</p>\n                </div>\n            </div>\n        ))}\n        </div>\n        <SendMessage scroll={scroll}/>\n        <div ref={scroll}></div>\n    </div>\n  )\n}\n\nexport default Chat"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,MAApC,QAAiD,OAAjD;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAAQC,IAAR,EAAcC,EAAd,QAAuB,aAAvB;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,KAAjC,EAAwCC,OAAxC,EAAiDC,KAAjD,QAA+D,oBAA/D;AACA,OAAOC,WAAP,MAAwB,2BAAxB;;AAEA,SAASC,IAAT,GAAgB;EAAA;;EACZ,IAAMC,MAAM,GAAGX,MAAM,EAArB;;EADY,gBAEoBF,QAAQ,CAAC,EAAD,CAF5B;EAAA;EAAA,IAELc,QAFK;EAAA,IAEKC,WAFL;;EAGZd,SAAS,CAAC,YAAM;IACZ,IAAMe,MAAM,GAAGV,UAAU,CAACD,EAAD,EAAK,UAAL,CAAzB;IAEA,IAAMY,CAAC,GAAGT,KAAK,CAACQ,MAAD,EAASP,OAAO,CAAC,WAAD,EAAc,KAAd,CAAhB,EAAsCC,KAAK,CAAC,EAAD,CAA3C,CAAf;IAEAH,UAAU,CAAEU,CAAF,EAAK,UAAAC,QAAQ,EAAI;MACvBH,WAAW,CAACG,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,UAAAC,GAAG;QAAA,OAAIA,GAAG,CAACC,IAAJ,EAAJ;MAAA,CAArB,CAAD,CAAX;IACH,CAFS,CAAV;EAGH,CARQ,EAQN,EARM,CAAT;EASA,oBACA;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,OAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADJ,eAEI;IAAK,SAAS,EAAC,MAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACCR,QAAQ,CAACM,GAAT,CAAa;IAAA,IAAGG,EAAH,QAAGA,EAAH;IAAA,IAAOC,IAAP,QAAOA,IAAP;IAAA,IAAaC,QAAb,QAAaA,QAAb;IAAA,IAAuBC,GAAvB,QAAuBA,GAAvB;IAAA,oBACV;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACI;MAAK,GAAG,EAAEH,EAAV;MAAc,SAAS,gBAASG,GAAG,KAAKtB,IAAI,CAACuB,WAAL,CAAiBD,GAAzB,GAA+B,MAA/B,GAAwC,UAAjD,CAAvB;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBACI;MAAK,GAAG,EAAED,QAAV;MAAoB,GAAG,EAAC,EAAxB;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EADJ,eAEI;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAID,IAAJ,CAFJ,CADJ,CADU;EAAA,CAAb,CADD,CAFJ,eAYI,oBAAC,WAAD;IAAa,MAAM,EAAEX,MAArB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAZJ,eAaI;IAAK,GAAG,EAAEA,MAAV;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAbJ,CADA;AAiBH;;AAED,eAAeD,IAAf"},"metadata":{},"sourceType":"module"}